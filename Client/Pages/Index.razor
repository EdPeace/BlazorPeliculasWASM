@page "/"


<div>
    <h1>Peliculas</h1>
    @if (Peliculas is null)
    {
       <img src="https://media.tenor.com/On7kvXhzml4AAAAi/loading-gif.gif"/>
    }else if(Peliculas.Count == 0)
    {
        <h2>No hay peliculas</h2>
    }
    else
    {
        @foreach (var pelicula in Peliculas)
        {
            <div>
                <p> Titulo: @((MarkupString)pelicula.Titulo)
                @if (DateTime.Today.Subtract(pelicula.FechaLanzamiento).Days < 1200)
                {
                    <span style="color: red"> ¡NUEVO!</span>
                }
                </p>
                <p> Fecha de Lanzamiento: @pelicula.FechaLanzamiento.ToString("dd MM yyyy")</p>
            </div>
        }
    }

    @* <h2> Ejemplo For</h2> *@
    @* @for (var i = 0; i < Peliculas.Count; i++) *@
    @* { *@
    @*     <div> *@
    @*         <p>@(i + 1)) Titulo: @Peliculas[i].Titulo</p> *@
    @*         <p> Fecha de Lanzamiento: @Peliculas[i].FechaLanzamiento.ToString("dd MM yyyy")</p> *@
    @*     </div> *@
    @* } *@
</div>


@code
{

    private List<Pelicula>? Peliculas { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(3000);
        Peliculas = ObtenerPeliculas();
    }

    List<Pelicula> ObtenerPeliculas()
    {
        return new List<Pelicula>
        {
            new() { Titulo = "<b>Pulp Fiction</b>", FechaLanzamiento = new DateTime(1994, 10, 14) },
            new() { Titulo = "Kill Bill", FechaLanzamiento = new DateTime(2003, 10, 14) },
            new() { Titulo = "Reservoir Dogs", FechaLanzamiento = new DateTime(1992, 10, 14) },
            new() { Titulo = "Django Unchained", FechaLanzamiento = new DateTime(2012, 10, 14) },
            new() { Titulo = "Inglorious Basterds", FechaLanzamiento = new DateTime(2009, 10, 14) },
            new() { Titulo = "Jackie Brown", FechaLanzamiento = new DateTime(1997, 10, 14) },
            new() { Titulo = "The Hateful Eight", FechaLanzamiento = new DateTime(2015, 10, 14) },
            new() { Titulo = "Once Upon a Time in Hollywood", FechaLanzamiento = new DateTime(2019, 10, 14) }
        };
    }

}